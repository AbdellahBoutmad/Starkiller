import{_ as i}from"./ListPageTop.c38f02eb.js";import{i as o,ae as u,b6 as d,n as _}from"./index.f0e6e38b.js";import{h as l}from"./moment.9709ab41.js";import{_ as m}from"./VDataTable.c59b74f8.js";import{a as c}from"./VSelect.3d0e9241.js";import{_ as p}from"./VTooltip.21cae413.js";import{_ as f}from"./VSwitch.f8266b20.js";import"./VBreadcrumbs.2e2663d0.js";import"./index.c35c0de2.js";const h={name:"Users",components:{ListPageTop:i},data(){return{moment:l,breads:[{text:"Users",disabled:!0,href:"/users"}],headers:[{text:"Name",value:"username"},{text:"Is Admin",value:"is_admin"},{text:"Actions",value:"actions",sortable:!1}]}},computed:{...o({users:t=>t.user.users}),...u({isAdmin:"application/isAdmin"})},mounted(){this.getUsers()},methods:{create(){this.$router.push({name:"userNew"})},async disableUser(t){d(t).catch(e=>{this.$snack.error(`Error: ${e}`),t.enabled=!t.enabled})},getUsers(){this.$store.dispatch("user/getUsers")}}};var b=function(){var e=this,n=e._self._c;return n("div",[n(i,{attrs:{breads:e.breads,"show-create":e.isAdmin,"show-refresh":!0,"show-delete":!1},on:{create:e.create,refresh:e.getUsers}}),n(m,{attrs:{headers:e.headers,items:e.users,dense:""},scopedSlots:e._u([{key:"item.username",fn:function({item:s}){return[e.isAdmin?n("router-link",{staticStyle:{color:"inherit"},attrs:{to:{name:"userEdit",params:{id:s.id}}}},[e._v(" "+e._s(s.username)+" ")]):n("span",[e._v(e._s(s.username))])]}},{key:"item.is_admin",fn:function({item:s}){return[n(c,{attrs:{disabled:""},model:{value:s.is_admin,callback:function(r){e.$set(s,"is_admin",r)},expression:"item.is_admin"}})]}},{key:"item.actions",fn:function({item:s}){return[e.isAdmin?n(p,{attrs:{disabled:!s.admin,top:""},scopedSlots:e._u([{key:"activator",fn:function({on:r}){return[n("div",e._g({staticStyle:{"max-width":"120px"}},r),[n(f,e._g({attrs:{disabled:s.admin,label:"Enabled"},on:{change:function(a){return e.disableUser(s)}},model:{value:s.enabled,callback:function(a){e.$set(s,"enabled",a)},expression:"item.enabled"}},r))],1)]}}],null,!0)},[n("span",[e._v("Cannot disable admin user")])]):e._e()]}}])})],1)},v=[],g=_(h,b,v,!1,null,null,null,null);const C=g.exports;export{C as default};
