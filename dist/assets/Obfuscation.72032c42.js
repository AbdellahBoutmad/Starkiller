import{_ as g}from"./ListPageTop.2a204a11.js";import{e as k,c7 as v,c8 as x,c9 as p,ca as K,cb as $,n as C,aP as _,f as i,aQ as l,aC as d,aR as y,aB as m,o as u,b as r,aD as f,a as b,a1 as D,c,p as P,g as S,l as T,h as w,i as h,cc as R}from"./index.85262dd3.js";import{_ as M}from"./VDataTable.125536b6.js";import{_ as O}from"./VSwitch.8a27782c.js";import"./VBreadcrumbs.32f4f2d0.js";import"./VSelect.8543571f.js";const q={components:{ListPageTop:g},data(){return{valid:!0,keywordDialog:!1,keywordDialogTitle:"",editedKeyword:{},preobfuscateDialog:!1,editedPreobfuscate:{},reobfuscate:!1,breads:[{text:"Obfuscation",disabled:!0,href:"/obfuscation"}],command:"",readonly:!1,headers:[{text:"Keyword",value:"keyword"},{text:"Replacement",value:"replacement"},{text:"Actions",value:"actions",sortable:!1,width:15}],rules:{keyword:[s=>!!s||"Keyword is required"],replacement:[s=>!!s||"Replacement is required"]}}},computed:{...k({keywords:s=>s.obfuscation.keywords,configs:s=>s.obfuscation.configs})},mounted(){this.refresh()},methods:{refresh(){this.refreshKeywords(),this.refreshConfigs()},refreshKeywords(){this.$store.dispatch("obfuscation/getKeywords")},refreshConfigs(){this.$store.dispatch("obfuscation/getConfigs")},toggleEditing(s){console.log("editing"),this.$set(s,"editing",!s.editing)},editKeyword(s){this.editedKeyword={...s},this.keywordDialogTitle="Edit Keyword",this.keywordDialog=!0},createKeyword(){this.editedKeyword={keyword:"",replacement:""},this.keywordDialogTitle="New Keyword",this.keywordDialog=!0},generateRandom(){this.editedKeyword.replacement=Math.random().toString(36).substring(2,8)},async saveKeyword(){if(!!this.$refs.form.validate())try{this.editedKeyword.id?await x(this.editedKeyword):await v(this.editedKeyword),this.refreshKeywords(),this.keywordDialog=!1}catch(s){this.$snack.error(`${s}`)}},async deleteKeyword(s){await this.$root.$confirm("Delete",`Are you sure you want to delete keyword ${s.keyword}?`,{color:"red"})&&this.$store.dispatch("obfuscation/deleteKeyword",s.id)},async editConfig(s){try{await p(s),s.preobfuscatable?this.$snack.success('Updated config. Use "preobfuscate" to re-apply obfuscation.'):this.$snack.success("Updated config.")}catch(e){this.$snack.error(`${e}`)}},openPreobfuscateDialog(s){this.editedPreobfuscate={...s},this.reobfuscate=!1,this.preobfuscateDialog=!0},async preobfuscateModules(){try{await p(this.editedPreobfuscate),await K(this.editedPreobfuscate.language,this.reobfuscate),this.$snack.info("Preobfuscation started in the background. This will take a few minutes.")}catch(s){this.$snack.error(`${s}`)}this.preobfuscateDialog=!1},async deletePreobfuscatedModules(s){if(await this.$root.$confirm("","Are you sure? This will delete all preobfuscated modules.",{color:"red",width:500}))try{await $(s.language),this.$snack.success("Preobfuscated modules deleted.")}catch(e){this.$snack.error(`${e}`)}}}};var A=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mr-6"},[t(g,{attrs:{breads:e.breads,"show-create":!1,"show-refresh":!0,"show-delete":!1},on:{refresh:e.refresh}}),t(_,{attrs:{"max-width":"500px"},model:{value:e.keywordDialog,callback:function(a){e.keywordDialog=a},expression:"keywordDialog"}},[t(i,[t(l,[t("span",{staticClass:"text-h5"},[e._v(e._s(e.keywordDialogTitle))])]),t(d,[t(y,[t(m,{ref:"form",nativeOn:{submit:function(a){return a.preventDefault(),e.saveKeyword.apply(null,arguments)}},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[t(u,{attrs:{rules:e.rules.keyword,dense:"",outlined:"",required:"",label:"Keyword"},model:{value:e.editedKeyword.keyword,callback:function(a){e.$set(e.editedKeyword,"keyword",a)},expression:"editedKeyword.keyword"}}),t(u,{attrs:{rules:e.rules.replacement,dense:"",outlined:"",required:"",label:"Replacement"},model:{value:e.editedKeyword.replacement,callback:function(a){e.$set(e.editedKeyword,"replacement",a)},expression:"editedKeyword.replacement"}}),t(r,{on:{click:e.generateRandom}},[e._v(" Random ")])],1)],1)],1),t(f,[t(b),t(r,{attrs:{color:"blue darken-1",text:""},on:{click:function(a){e.keywordDialog=!1}}},[e._v(" Cancel ")]),t(r,{attrs:{color:"blue darken-1",text:""},on:{click:e.saveKeyword}},[e._v(" Save ")])],1)],1)],1),t(_,{attrs:{"max-width":"500px"},model:{value:e.preobfuscateDialog,callback:function(a){e.preobfuscateDialog=a},expression:"preobfuscateDialog"}},[t(i,[t(l,[t("span",{staticClass:"text-h5"})]),t(d,[t("p",[e._v(' Are you sure? This will preobfuscate every module and will take a few minutes. Check "reobfuscate" if you need to force all modules to be reobfuscated after changing the global obfuscation configuration. ')]),t(y,[t(D,{attrs:{label:"Reobfuscate"},model:{value:e.reobfuscate,callback:function(a){e.reobfuscate=a},expression:"reobfuscate"}})],1)],1),t(f,[t(b),t(r,{attrs:{color:"blue darken-1",text:""},on:{click:function(a){e.preobfuscateDialog=!1}}},[e._v(" Cancel ")]),t(r,{attrs:{color:"blue darken-1",text:""},on:{click:e.preobfuscateModules}},[e._v(" Save ")])],1)],1)],1),t("div",{staticStyle:{display:"flex","flex-direction":"row","align-items":"flex-start"}},[t(i,{staticClass:"ma-2 pa-2",staticStyle:{flex:"1 0 50%"}},[t(l,[t("span",{staticStyle:{display:"flex","justify-content":"space-between",width:"100%"}},[t("span",{staticClass:"headline"},[e._v("Keyword Obfuscation")]),t(r,{attrs:{color:"primary"},on:{click:e.createKeyword}},[e._v(" Create "),t(c,{attrs:{right:""}},[e._v(" fa-plus-square ")])],1)],1)]),t(M,{attrs:{headers:e.headers,items:e.keywords},scopedSlots:e._u([{key:"item.actions",fn:function({item:a}){return[t(P,{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:o}){return[t(r,e._g(e._b({attrs:{text:"",icon:"","x-small":""}},"v-btn",o,!1),n),[t(c,[e._v("fa-ellipsis-v")])],1)]}}],null,!0)},[t(S,{staticClass:"ml-2 mr-2"},[t(T,{staticClass:"pb-4"}),t(w,{key:"edit",attrs:{link:""},on:{click:function(n){return e.editKeyword(a)}}},[t(h,[t(c,[e._v("fa-edit")]),e._v(" Edit ")],1)],1),t(w,{key:"delete",attrs:{link:""},on:{click:function(n){return e.deleteKeyword(a)}}},[t(h,[t(c,[e._v("fa-trash-alt")]),e._v(" Delete ")],1)],1)],1)],1)]}}])})],1),t(i,{staticClass:"ma-2 pa-2",staticStyle:{flex:"1 0 50%"}},[t(l,[t("span",[t("span",{staticClass:"headline"},[e._v("Global Obfuscation")])])]),t(d,e._l(e.configs,function(a,n){return t(i,{key:n,staticClass:"ma-2 pa-2",attrs:{outlined:""}},[t(R,[e._v(e._s(a.language))]),t(d,[t(m,[t(O,{attrs:{label:"Enabled",readonly:e.readonly},model:{value:a.enabled,callback:function(o){e.$set(a,"enabled",o)},expression:"config.enabled"}}),t(u,{attrs:{label:"Command",rules:a.language!=="csharp"?[o=>!!o||"Command is required"]:[],dense:"",outlined:"",readonly:e.readonly},model:{value:a.command,callback:function(o){e.$set(a,"command",o)},expression:"config.command"}})],1)],1),t(f,[t(r,{attrs:{color:"primary"},on:{click:function(o){return e.editConfig(a)}}},[e._v(" Save ")]),t(r,{attrs:{disabled:!a.preobfuscatable,text:"",color:"primary"},on:{click:function(o){return e.openPreobfuscateDialog(a)}}},[e._v(" Preobfuscate ")]),t(r,{attrs:{disabled:!a.preobfuscatable,text:"",color:"error"},on:{click:function(o){return e.deletePreobfuscatedModules(a)}}},[e._v(" Remove preobfuscated modules ")])],1)],1)}),1)],1)],1)],1)},V=[],E=C(q,A,V,!1,null,null,null,null);const G=E.exports;export{G as default};
