import{_ as i}from"./DateTimeDisplay.c35d52fb.js";import{e as c,aZ as h,a_ as S,n as d,p as v,b as x,c as r,g as k,h as o,i as l,l as w}from"./index.85262dd3.js";import{h as _}from"./moment.9709ab41.js";import{D as u}from"./download-stager.cac59e06.js";import{C as p}from"./copy-stager.0103f297.js";import{_ as b}from"./VDataTable.125536b6.js";import{_ as g}from"./AdvancedTable.8f5cf108.js";import{_ as m}from"./ListPageTop.2a204a11.js";import{_ as $}from"./VSwitch.8a27782c.js";import"./VTooltip.0c849a74.js";import"./VSelect.8543571f.js";import"./VExpansionPanels.d99facd5.js";import"./VBreadcrumbs.32f4f2d0.js";const C={name:"StagersTable",components:{DateTimeDisplay:i},mixins:[u,p],props:{onlyMyStagers:{type:Boolean,default:!1},input:{type:Array,default:()=>[]}},data(){return{moment:_,headers:[{text:"Name",value:"name"},{text:"Listener",value:"options.Listener"},{text:"Type",value:"template"},{text:"Language",value:"options.Language"},{text:"Created At",value:"created_at"},{text:"Actions",value:"actions",sortable:!1}],selected:[]}},computed:{...c({stagers:t=>t.stager.stagers,stagersStatus:t=>t.stager.status}),filteredStagers(){return this.stagers.filter(t=>this.onlyMyStagers?t.user_id===this.user.id:!0)}},watch:{selected(t){this.$emit("input",t)}},mounted(){this.getStagers()},methods:{isDownload(t){return t.downloads&&t.downloads.length>0},isOneLiner(t){return t.one_liner},async copy(t){const e=t.downloads.length-1;return this.copyStager(await h(t.downloads[e].id))},async download(t){const e=t.downloads.length-1;return S(t.downloads[e].id)},async deleteStager(t){this.$emit("delete-stager",t)},getStagers(){this.$store.dispatch("stager/getStagers")}}};var D=function(){var e=this,s=e._self._c;return s("div",[s(b,{attrs:{headers:e.headers,items:e.filteredStagers,"footer-props":{itemsPerPageOptions:[5,10,15,20,50,100]},"items-per-page":15,loading:e.stagersStatus==="loading","item-key":"id",dense:"","show-select":""},scopedSlots:e._u([{key:"item.name",fn:function({item:n}){return[s("router-link",{staticStyle:{color:"inherit"},attrs:{to:{name:"stagerEdit",params:{id:n.id}}}},[e._v(" "+e._s(n.name)+" ")])]}},{key:"item.options.Listener",fn:function({item:n}){return[s("router-link",{staticStyle:{color:"inherit"},attrs:{to:{name:"listenerEdit",params:{id:n.id}}}},[e._v(" "+e._s(n.options.Listener)+" ")])]}},{key:"item.created_at",fn:function({item:n}){return[s(i,{attrs:{timestamp:n.created_at}})]}},{key:"item.actions",fn:function({item:n}){return[s(v,{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:y}){return[s(x,e._g(e._b({attrs:{text:"",icon:"","x-small":""}},"v-btn",y,!1),a),[s(r,[e._v("fa-ellipsis-v")])],1)]}}],null,!0)},[s(k,{staticClass:"ml-2 mr-2"},[e.isDownload(n)?s(o,{key:"download",attrs:{link:""},on:{click:function(a){return e.download(n)}}},[s(l,[s(r,[e._v("fa-download")]),e._v(" Download ")],1)],1):e._e(),e.isOneLiner(n)?s(o,{key:"clipboard",attrs:{link:""},on:{click:function(a){return e.copy(n)}}},[s(l,[s(r,[e._v("fa-paperclip")]),e._v(" Copy to Clipboard ")],1)],1):e._e(),s(o,{key:"copy",attrs:{to:{name:"stagerNew",params:{copy:!0,id:n.id}},link:""}},[s(l,[s(r,[e._v("fa-clone")]),e._v(" Copy ")],1)],1),s(w,{staticClass:"pb-4"}),s(o,{key:"delete",attrs:{link:""},on:{click:function(a){return e.deleteStager(n)}}},[s(l,[s(r,[e._v("fa-trash-alt")]),e._v(" Delete ")],1)],1)],1)],1)]}}]),model:{value:e.selected,callback:function(n){e.selected=n},expression:"selected"}})],1)},M=[],O=d(C,D,M,!1,null,null,null,null);const f=O.exports;const T={name:"Stagers",components:{AdvancedTable:g,ListPageTop:m,StagersTable:f},mixins:[u,p],data(){return{moment:_,breads:[{text:"Stagers",disabled:!0,href:"/stagers"}],selected:[]}},computed:{...c({filterOnlyMyStagersCheckbox:t=>t.application.filterOnlyMyStagers}),showDelete(){return this.selected.length>0},filterOnlyMyStagersCheckbox:{set(t){this.$store.dispatch("application/filterOnlyMyStagers",t)},get(){return this.filterOnlyMyStagers}}},methods:{create(){this.$router.push({name:"stagerNew"})},async deleteStager(t){await this.$root.$confirm("Delete","Are you sure you want to delete this stager?",{color:"red"})&&this.$store.dispatch("stager/deleteStager",t.id)},async deleteStagers(){await this.$root.$confirm("Delete",`Are you sure you want to delete ${this.selected.length} stagers?`,{color:"red"})&&(this.selected.forEach(t=>{this.$store.dispatch("stager/deleteStager",t.id)}),this.selected=[])},getStagers(){this.$refs.stagersTable.getStagers()}}};var L=function(){var e=this,s=e._self._c;return s("div",[s(m,{attrs:{breads:e.breads,"show-create":!0,"show-refresh":!0,"show-delete":e.showDelete},on:{create:e.create,refresh:e.getStagers,delete:e.deleteStagers}}),s(g,{scopedSlots:e._u([{key:"filters",fn:function(){return[s($,{attrs:{label:"Only My Stagers"},model:{value:e.filterOnlyMyStagersCheckbox,callback:function(n){e.filterOnlyMyStagersCheckbox=n},expression:"filterOnlyMyStagersCheckbox"}})]},proxy:!0},{key:"table",fn:function(){return[s(f,{ref:"stagersTable",attrs:{"only-my-stagers":e.filterOnlyMyStagersCheckbox},on:{"delete-stager":e.deleteStager},model:{value:e.selected,callback:function(n){e.selected=n},expression:"selected"}})]},proxy:!0}])})],1)},A=[],E=d(T,L,A,!1,null,null,null,null);const J=E.exports;export{J as default};
